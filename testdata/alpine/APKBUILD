# Maintainer: Example <example@example.org>
pkgname=curl
pkgver=8.11.1
pkgrel=0
pkgdesc="URL retrieval utility and library"
url="https://curl.se/"
arch="all"
license="curl"
depends="ca-certificates-bundle"
depends_dev="
	brotli-dev
	c-ares-dev
	libidn2-dev
	libpsl-dev
	nghttp2-dev
	openssl-dev>3
	zlib-dev
	zstd-dev
	"
makedepends="$depends_dev perl python3"
checkdepends="nghttp2 python3"
subpackages="
	$pkgname-dbg
	$pkgname-static
	$pkgname-doc
	$pkgname-dev
	$pkgname-zsh-completion
	$pkgname-fish-completion
	libcurl
	"
source="https://curl.se/download/curl-$pkgver.tar.xz"

build() {
	./configure \
		--prefix=/usr \
		--enable-ipv6 \
		--enable-unix-sockets
	make
}

check() {
	make test
}

package() {
	make DESTDIR="$pkgdir" install
}
